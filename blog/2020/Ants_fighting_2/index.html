<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Qinglei Ji   | Ants fighting! Round 2.</title>
<meta name="description" content="This is the personal website of Qinglei Ji">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.xyz/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”¬</text></svg>">

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="/blog/2020/Ants_fighting_2/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-168191336-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'UA-168191336-1');
</script>




    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav sticky-bottom-footer">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
       <span class="font-weight-bold">Qinglei Ji</span>   
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item active">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                projects
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                publications
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/vitae/">
                vitae
                
              </a>
          </li>
          
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Ants fighting! Round 2.</h1>
    <p class="post-meta">August 7, 2020</p>
  </header>

  <article class="post-content">
    <p>Last time, the two groups of ants had a very simple <a href="https://qinglei.tech/posts/ants_fighting/">fight</a>. They both occupied the enemiesâ€™ home at last. Well, now, after some careful investigation, they upgrated the battle policy. On the same \(30 \times 30\) battle field, the same \(100\) ants now follows new rules:</p>
<ul>
  <li>Each ant look around and counts the ememies and friends within a detection range.</li>
  <li>Each ant compares the number of enemies and friends, if more friends are around, it will analyse the distribution of the enemies and find out which direction (\(+x,-x,+y,-y\)) is the weakness of the enemy (least number of enemies). Then it will move towards that direction for \(1\) step to have a fight. On the other hand, if less friend is around, it will go to the direction where more friends are there.</li>
  <li>If equal friends and enemies are in sight, the ant will choose to stay in the same position to keep observation.</li>
</ul>

<p>OK. First round, we try a detection range with \(5\), meaning that each ant can only sees a small field.</p>

<div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-08-07-Ants_fighting_2/detection distance 5.gif" />
    </div>
</div>

<p>From the animation, we can see that small clusters of the same group of ants can be observed. However, the ants are not showing very obvious tendency to fight as a team. What about increasing the detection distance of each ant to \(10\)?</p>

<div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-08-07-Ants_fighting_2/detection distance 10.gif" />
    </div>
</div>

<p>This time, ants of a larger scale decides to move into several rallying points. Also, some unique ants are too far away from their people and do not know where to go. What if the ants can see further to \(15\)?</p>

<div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        <img class="img-fluid rounded z-depth-1" src="/assets/img/2020-08-07-Ants_fighting_2/detection distance 15.gif" />
    </div>
</div>

<p>Now, it is very obvious that almost all the the ants assembles quickly to the center. The distribution of the two groups looks like two perpendicular stripes. I guess they all prefer to avoid the enemies and fall to the embrace of the friends.</p>

<p>Well, thatâ€™s it for today. An interesting game for me, maybe for the ants as wellâ€¦</p>

<h3 id="appendix-code">Appendix code</h3>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
</pre></td><td class="code"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>


<span class="k">def</span> <span class="nf">initialize_ant_info</span><span class="p">(</span><span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info_number</span><span class="p">,</span> <span class="n">ant_distribution_ratio</span><span class="p">,</span> <span class="n">playfield_xlim</span><span class="p">,</span> <span class="n">playfield_ylim</span><span class="p">):</span>
    <span class="n">ant_info</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info_number</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ant_number</span><span class="p">):</span>
        <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">if</span> <span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">ant_distribution_ratio</span><span class="p">:</span>
            <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">playfield_xlim</span><span class="p">)</span>
        <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">playfield_ylim</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ant_info</span>


<span class="k">def</span> <span class="nf">initialize_ant_action</span><span class="p">(</span><span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info_number</span><span class="p">,</span> <span class="n">ant_info</span><span class="p">):</span>
    <span class="n">ant_action</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info_number</span><span class="p">])</span>
    <span class="n">ant_action</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">ant_info</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">ant_action</span>


<span class="k">def</span> <span class="nf">ant_action_updatter</span><span class="p">(</span><span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info</span><span class="p">,</span> <span class="n">ant_action</span><span class="p">,</span> <span class="n">playfield_ylim</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">ant_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ant_number</span><span class="p">):</span>
        <span class="n">friend_number</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">enemy_number</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">friend_sum_position_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">friend_sum_position_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">enemy_sum_position_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">enemy_sum_position_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">ant_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ant_number</span><span class="p">):</span>
            <span class="n">ant_distance</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span>
                <span class="p">(</span><span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="p">(</span><span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">ant_detect_distance</span> <span class="o">=</span> <span class="mi">25</span>
            <span class="k">if</span> <span class="n">ant_i</span> <span class="o">!=</span> <span class="n">ant_j</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">ant_distance</span> <span class="o">&lt;=</span> <span class="n">ant_detect_distance</span><span class="p">:</span>
                    <span class="n">friend_number</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">friend_sum_position_x</span> <span class="o">+=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="n">friend_sum_position_y</span> <span class="o">+=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="ow">and</span> <span class="n">ant_distance</span> <span class="o">&lt;=</span> <span class="n">ant_detect_distance</span><span class="p">:</span>
                    <span class="n">enemy_number</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">enemy_sum_position_x</span> <span class="o">+=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="n">enemy_sum_position_y</span> <span class="o">+=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_j</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">friend_number</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">enemy_number</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1">#ant_action[ant_i, 3] = random.randint(-1,1)
</span>        <span class="k">elif</span> <span class="n">friend_number</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">enemy_number</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">enemy_average_position_x</span> <span class="o">=</span> <span class="n">enemy_sum_position_x</span><span class="o">/</span><span class="n">enemy_number</span>
            <span class="n">enemy_average_position_y</span> <span class="o">=</span> <span class="n">enemy_sum_position_y</span><span class="o">/</span><span class="n">enemy_number</span>
            <span class="k">if</span> <span class="n">enemy_average_position_x</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
                <span class="n">enemy_position_direction_x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">enemy_position_direction_x</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">enemy_average_position_y</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
                <span class="n">enemy_position_direction_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">enemy_position_direction_y</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">enemy_average_position_x</span> <span class="o">&lt;=</span> <span class="n">enemy_average_position_y</span><span class="p">:</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">enemy_position_direction_y</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">enemy_position_direction_x</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">friend_number</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">enemy_number</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">friend_average_position_x</span> <span class="o">=</span> <span class="n">friend_sum_position_x</span><span class="o">/</span><span class="n">friend_number</span>
            <span class="n">friend_average_position_y</span> <span class="o">=</span> <span class="n">friend_sum_position_y</span><span class="o">/</span><span class="n">friend_number</span>
            <span class="k">if</span> <span class="n">friend_average_position_x</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
                <span class="n">friend_position_direction_x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">friend_position_direction_x</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">friend_average_position_y</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
                <span class="n">friend_position_direction_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">friend_position_direction_y</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">friend_average_position_x</span> <span class="o">&lt;=</span> <span class="n">friend_average_position_y</span><span class="p">:</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">friend_position_direction_y</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="n">friend_position_direction_x</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">friend_average_position_x</span> <span class="o">=</span> <span class="n">friend_sum_position_x</span><span class="o">/</span><span class="n">friend_number</span>
            <span class="n">friend_average_position_y</span> <span class="o">=</span> <span class="n">friend_sum_position_y</span><span class="o">/</span><span class="n">friend_number</span>
            <span class="n">enemy_average_position_x</span> <span class="o">=</span> <span class="n">enemy_sum_position_x</span><span class="o">/</span><span class="n">enemy_number</span>
            <span class="n">enemy_average_position_y</span> <span class="o">=</span> <span class="n">enemy_sum_position_y</span><span class="o">/</span><span class="n">enemy_number</span>

            <span class="k">if</span> <span class="n">friend_average_position_x</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
                <span class="n">friend_position_direction_x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">friend_position_direction_x</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">friend_average_position_y</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
                <span class="n">friend_position_direction_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">friend_position_direction_y</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">enemy_average_position_x</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
                <span class="n">enemy_position_direction_x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">enemy_position_direction_x</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">enemy_average_position_y</span> <span class="o">&lt;=</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
                <span class="n">enemy_position_direction_y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">enemy_position_direction_y</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">friend_number</span> <span class="o">&gt;</span> <span class="n">enemy_number</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">enemy_average_position_x</span> <span class="o">&lt;=</span> <span class="n">enemy_average_position_y</span><span class="p">:</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">enemy_position_direction_x</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">enemy_position_direction_y</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="n">friend_number</span> <span class="o">&lt;</span> <span class="n">enemy_number</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">friend_average_position_x</span> <span class="o">&lt;=</span> <span class="n">friend_average_position_y</span><span class="p">:</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">friend_position_direction_y</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">enemy_position_direction_x</span>
                    <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">ant_action</span><span class="p">[</span><span class="n">ant_i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">ant_action</span>


<span class="k">def</span> <span class="nf">ant_info_updatter</span><span class="p">(</span><span class="n">ant_info</span><span class="p">,</span> <span class="n">ant_action</span><span class="p">,</span> <span class="n">playfield_xlim</span><span class="p">,</span> <span class="n">playfield_ylim</span><span class="p">):</span>
    <span class="n">ant_info</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">ant_info</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">ant_action</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
    <span class="n">ant_info</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">ant_info</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">ant_action</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ant_info</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">playfield_xlim</span><span class="p">:</span>
            <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">playfield_xlim</span>
        <span class="k">if</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">playfield_ylim</span><span class="p">:</span>
            <span class="n">ant_info</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">playfield_ylim</span>
    <span class="k">return</span> <span class="n">ant_info</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>

    <span class="n">ant_number</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">ant_info_number</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># number, identity, position_x, position_y
</span>    <span class="n">playfield_xlim</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">playfield_ylim</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">ant_distribution_ratio</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">ant_info</span> <span class="o">=</span> <span class="n">initialize_ant_info</span><span class="p">(</span>
        <span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info_number</span><span class="p">,</span> <span class="n">ant_distribution_ratio</span><span class="p">,</span> <span class="n">playfield_xlim</span><span class="p">,</span> <span class="n">playfield_ylim</span><span class="p">)</span>
    <span class="n">ant_action</span> <span class="o">=</span> <span class="n">initialize_ant_action</span><span class="p">(</span><span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info_number</span><span class="p">,</span> <span class="n">ant_info</span><span class="p">)</span>

    <span class="n">epoch</span> <span class="o">=</span> <span class="mi">60</span>

    <span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">ion</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">epo</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">epoch</span><span class="p">):</span>
        <span class="n">ant_action</span> <span class="o">=</span> <span class="n">ant_action_updatter</span><span class="p">(</span>
            <span class="n">ant_number</span><span class="p">,</span> <span class="n">ant_info</span><span class="p">,</span> <span class="n">ant_action</span><span class="p">,</span> <span class="n">playfield_ylim</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ant_action</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">).</span><span class="nb">all</span><span class="p">():</span>  <span class="c1"># break if no change any more
</span>            <span class="k">break</span>
        <span class="n">ant_info</span> <span class="o">=</span> <span class="n">ant_info_updatter</span><span class="p">(</span>
            <span class="n">ant_info</span><span class="p">,</span> <span class="n">ant_action</span><span class="p">,</span> <span class="n">playfield_xlim</span><span class="p">,</span> <span class="n">playfield_ylim</span><span class="p">)</span>

        <span class="n">epo</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">plt</span><span class="p">.</span><span class="n">cla</span><span class="p">()</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Ants fighting! Epoch: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">epo</span><span class="p">))</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">xlim</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="n">playfield_xlim</span> <span class="o">+</span> <span class="p">.</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="n">playfield_ylim</span> <span class="o">+</span> <span class="p">.</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">playfield_xlim</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">playfield_ylim</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">ant</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ant_number</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ant_info</span><span class="p">[</span><span class="n">ant</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
                            <span class="n">s</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">'r'</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">'o'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">ant_info</span><span class="p">[</span><span class="n">ant</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">ant_info</span><span class="p">[</span><span class="n">ant</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
                            <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s">'b'</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">'o'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">epo</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">pause</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">ioff</span><span class="p">()</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></figure>


  </article>

  

</div>

    </div>

    <!-- Footer -->

    
<footer class="sticky-bottom mt-5">
  <div class="container">
    &copy; Copyright 2021 Qinglei Ji  .
    
    
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
